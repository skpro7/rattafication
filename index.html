<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RATTAFICATION - Smart Exam Preparation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #62c277;
            --primary-light: #e0e7ff;
            --secondary: #254e67;
            --accent: #3ff2f5;
            --success: #4cc9f0;
            --warning: #f72585;
            --info: #4895ef;
            --light: #f8f9fa;
            --dark: #26435e;
            --card-bg: rgba(238, 240, 233, 0.85);
            --sidebar-bg: rgba(201, 225, 249, 0.85);
            --border: #066e20;
            --text: #03234f;
            --text-light: #64748b;
        }

        .dark-theme {
            --primary: #efc048fb;
            --primary-light: #122e58;
            --secondary: #2e1764;
            --accent: #c16f23;
            --success: #4cc9f0;
            --warning: #f72585;
            --info: #4895ef;
            --light: rgba(21, 48, 59, 0.85);
            --dark: #aea2a2;
            --card-bg: rgba(15, 27, 44, 0.85);
            --sidebar-bg: rgba(14, 26, 36, 0.85);
            --border: #c26363;
            --text: #ffffff;
            --text-light: #53ffb7;
        }

        .semi-dark-theme {
            --primary: #2ec0cd;
            --primary-light: #334155;
            --secondary: #5dc6be;
            --accent: #2973afd7;
            --success: #4cc9f0;
            --warning: #f72585;
            --info: #4895ef;
            --light: rgba(30, 41, 59, 0.85);
            --dark: #f8f9fa;
            --card-bg: rgba(64, 70, 89, 0.85);
            --sidebar-bg: rgba(30, 41, 59, 0.85);
            --border: #475569;
            --text: #ffffff;
            --text-light: #8b9bb3;
        }

        .colorful-theme {
            --primary: #da3535;
            --primary-light: #dce1a0;
            --secondary: #45c0b8;
            --accent: #f7d438d6;
            --success: #06d6a0;
            --warning: #ff0400;
            --info: #118ab2;
            --light: rgba(252, 208, 222, 0.85);
            --dark: #212529;
            --card-bg: rgba(255, 251, 241, 0.85);
            --sidebar-bg: rgba(255, 235, 144, 0.85);
            --border: #8e6f01;
            --text: #0b4216;
            --text-light: #27305e;
        }

        .ocean-theme {
            --primary: #55aaff;
            --primary-light: #e8f0fe;
            --secondary: #0d47a1;
            --accent: #00bcd4;
            --success: #0f9d58;
            --warning: #fc4333;
            --info: #64c6de;
            --light: rgba(210, 226, 255, 0.85);
            --dark: #212529;
            --card-bg: rgba(198, 234, 251, 0.85);
            --sidebar-bg: rgba(173, 227, 245, 0.85);
            --border: #152131;
            --text: #334155;
            --text-light: #64748b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #142145 0%, #082c2e 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.3s ease;
            position: relative;
        }

        /* Theme-specific background animations */
        .theme-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        /* Light theme - Sun rays */
        .light-theme-bg {
            background: linear-gradient(135deg, #0557447f 0%, #1acef368 100%);
        }

        .light-theme-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 80%, rgba(255, 255, 200, 0.3) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255, 255, 200, 0.2) 0%, transparent 50%),
                        radial-gradient(circle at 40% 40%, rgba(255, 255, 200, 0.4) 0%, transparent 50%);
            animation: sunRays 20s infinite linear;
        }

        @keyframes sunRays {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Dark theme - Stars */
        .dark-theme-bg {
            background: linear-gradient(135deg, #090d18 0%, #1a1a2e 100%);
        }

        .dark-theme-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 40px 70px, #fff, transparent),
                radial-gradient(1px 1px at 90px 40px, #ddd, transparent),
                radial-gradient(1px 1px at 130px 80px, #fff, transparent),
                radial-gradient(2px 2px at 160px 30px, #eee, transparent),
                radial-gradient(1px 1px at 200px 70px, #fff, transparent),
                radial-gradient(1px 1px at 240px 40px, #ddd, transparent),
                radial-gradient(2px 2px at 280px 80px, #fff, transparent),
                radial-gradient(1px 1px at 320px 30px, #eee, transparent),
                radial-gradient(2px 2px at 360px 70px, #fff, transparent),
                radial-gradient(1px 1px at 400px 40px, #ddd, transparent),
                radial-gradient(2px 2px at 440px 80px, #fff, transparent);
            background-repeat: repeat;
            background-size: 500px 500px;
            animation: stars 120s linear infinite;
        }

        @keyframes stars {
            from { transform: translateX(0); }
            to { transform: translateX(-500px); }
        }

        /* Semi-dark theme - Floating particles */
        .semi-dark-theme-bg {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        }

        .semi-dark-theme-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(3px 3px at 50px 50px, rgba(255,255,255,0.3), transparent),
                radial-gradient(2px 2px at 150px 150px, rgba(255,255,255,0.2), transparent),
                radial-gradient(4px 4px at 250px 250px, rgba(255,255,255,0.25), transparent),
                radial-gradient(3px 3px at 350px 350px, rgba(255,255,255,0.3), transparent);
            animation: floatParticles 30s infinite linear;
        }

        @keyframes floatParticles {
            0% { transform: translateY(0) rotate(0deg); }
            100% { transform: translateY(-100px) rotate(360deg); }
        }

        /* Colorful theme - Floating shapes */
        .colorful-theme-bg {
            background: linear-gradient(135deg, #783a3a67 0%, #795307 100%);
        }

        .colorful-theme-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(30px 30px at 10% 10%, rgba(255,255,255,0.2), transparent),
                radial-gradient(40px 40px at 90% 20%, rgba(255,255,255,0.15), transparent),
                radial-gradient(50px 50px at 20% 80%, rgba(255,255,255,0.1), transparent),
                radial-gradient(60px 60px at 80% 90%, rgba(255,255,255,0.25), transparent);
            animation: floatingShapes 40s infinite linear;
        }

        @keyframes floatingShapes {
            0% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -20px) rotate(120deg); }
            66% { transform: translate(-20px, 15px) rotate(240deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }

        /* Ocean theme - Waves */
        .ocean-theme-bg {
            background: linear-gradient(135deg, #002451 0%, #091539 100%);
        }

        .ocean-theme-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
            background-size: 200% 100%;
            animation: waves 15s infinite linear;
        }

        @keyframes waves {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Background Illustrations */
        .bg-illustration {
            position: fixed;
            z-index: -1;
            opacity: 0.1;
            pointer-events: none;
            animation: float 6s ease-in-out infinite;
        }

        .illustration-1 {
            top: 5%;
            left: 5%;
            font-size: 8rem;
            color: var(--primary);
            animation-delay: 0s;
        }

        .illustration-2 {
            top: 15%;
            right: 10%;
            font-size: 6rem;
            color: var(--accent);
            animation-delay: 1s;
        }

        .illustration-3 {
            bottom: 10%;
            left: 10%;
            font-size: 7rem;
            color: var(--success);
            animation-delay: 2s;
        }

        .illustration-4 {
            bottom: 20%;
            right: 5%;
            font-size: 5rem;
            color: var(--warning);
            animation-delay: 3s;
        }

        .pattern-dots {
            position: fixed;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(var(--primary) 1px, transparent 1px);
            background-size: 30px 30px;
            z-index: -1;
            opacity: 0.1;
            pointer-events: none;
        }

        .doodle {
            position: fixed;
            z-index: -1;
            opacity: 0.1;
            pointer-events: none;
            animation: float 8s ease-in-out infinite;
        }

        .doodle-1 {
            top: 30%;
            left: 8%;
            font-size: 5rem;
            transform: rotate(15deg);
            color: var(--accent);
            animation-delay: 0.5s;
        }

        .doodle-2 {
            top: 60%;
            right: 12%;
            font-size: 4rem;
            transform: rotate(-10deg);
            color: var(--warning);
            animation-delay: 1.5s;
        }

        .doodle-3 {
            top: 40%;
            right: 5%;
            font-size: 6rem;
            transform: rotate(25deg);
            color: var(--success);
            animation-delay: 2.5s;
        }

        .floating-shapes {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            background: var(--primary);
            opacity: 0.05;
            animation: float 15s infinite linear;
        }

        .shape-1 {
            width: 200px;
            height: 200px;
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }

        .shape-2 {
            width: 150px;
            height: 150px;
            top: 60%;
            right: 10%;
            animation-delay: 5s;
        }

        .shape-3 {
            width: 100px;
            height: 100px;
            bottom: 20%;
            left: 15%;
            animation-delay: 10s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes slideIn {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px rgba(67, 97, 238, 0.5); }
            50% { box-shadow: 0 0 20px rgba(67, 97, 238, 0.8); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border);
            animation: slideIn 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.5s;
        }

        header:hover::before {
            left: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
        }

        .logo-icon {
            font-size: 2.5rem;
            color: var(--primary);
            transform: rotate(-5deg);
            background: var(--primary-light);
            padding: 10px;
            border-radius: 12px;
            animation: pulse 2s infinite;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .logo-text {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            position: relative;
        }

        .logo-text::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.3s;
        }

        .logo:hover .logo-text::after {
            transform: scaleX(1);
            transform-origin: left;
        }

        /* Welcome Screen */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.8s ease;
        }

        .welcome-content {
            text-align: center;
            max-width: 800px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transform: perspective(1000px) rotateX(5deg);
            animation: float 6s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }

        .welcome-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .welcome-title {
            font-size: 3rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: slideIn 1s ease-out;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: var(--text);
            animation: slideIn 1.2s ease-out;
        }

        .slideshow-container {
            width: 100%;
            height: 200px;
            position: relative;
            margin-bottom: 30px;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background: var(--light);
            border-radius: 10px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .slide.active {
            opacity: 0.5;
        }

        .slide-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .slide-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--text);
        }

        .slide-content {
            color: var(--text-light);
            text-align: center;
            max-width: 80%;
        }

        .name-input {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-size: 1.1rem;
            text-align: center;
            transition: all 0.3s ease;
            animation: slideIn 1.4s ease-out;
        }

        .name-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
            animation: glow 2s infinite;
        }

        .start-btn {
            padding: 15px 40px;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
            animation: slideIn 1.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .start-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .start-btn:hover::before {
            left: 100%;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(67, 97, 238, 0.6);
        }

        /* Main App */
        .app-content {
            display: none;
        }

        .user-greeting {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary);
            animation: slideIn 0.8s ease-out;
        }

        /* Dashboard */
        .dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: slideIn 0.8s ease-out;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        .card-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            font-size: 1.5rem;
        }

        /* Revision Calendar */
        .calendar-container {
            margin-bottom: 30px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .calendar-nav button {
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calendar-nav button:hover {
            background: var(--primary);
            color: white;
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        /* Updated Calendar Day Styles for Compact View */
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--light);
            border-radius: 5px;
            position: relative;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
            font-size: 0.8rem;
            padding: 2px;
        }

        .calendar-day:hover {
            background: var(--primary-light);
            transform: scale(1.05);
        }

        .calendar-day.current {
            background: var(--primary-light);
            border: 1px solid var(--primary);
        }

        .calendar-day.revision {
            background: rgba(114, 9, 183, 0.1);
            border: 1px solid var(--accent);
        }

        .day-number {
            font-size: 0.9rem;
            font-weight: 600;
        }

        .revision-dots {
            display: flex;
            gap: 2px;
            margin-top: 2px;
        }

        .revision-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .dot-math { background: #4cc9f0; }
        .dot-reasoning { background: #f72585; }
        .dot-english { background: #4895ef; }
        .dot-gk { background: #7209b7; }
        .dot-computer { background: #3a0ca3; }
        .dot-banking { background: #38b000; }
        .dot-custom { background: #6c757d; }

        /* Add Topic Section - New Design */
        .add-topic-section {
            margin-bottom: 30px;
        }

        .topic-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
        }

        /* New Input Design */
        .input-container {
            display: flex;
            background: var(--light);
            border-radius: 1rem;
            box-shadow: 4px 4px 8px rgba(0,0,0,0.1), -4px -4px 10px rgba(255,255,255,0.5);
            padding: 0.3rem;
            gap: 0.3rem;
        }

        .form-select, .form-input {
            border-radius: 0.8rem 0 0 0.8rem;
            background: var(--light);
            box-shadow: inset 5px 5px 10px rgba(0,0,0,0.05), inset -5px -5px 10px rgba(255,255,255,0.5);
            width: 100%;
            flex-basis: 75%;
            padding: 1rem;
            border: none;
            border: 1px solid transparent;
            color: var(--text);
            transition: all 0.2s ease-in-out;
        }

        .form-select:focus, .form-input:focus {
            border: 1px solid var(--primary);
            outline: none;
            box-shadow: inset 0px 0px 10px rgba(67, 97, 238, 0.2), 0px 0px 10px rgba(67, 97, 238, 0.2);
        }

        .add-btn {
            grid-column: span 2;
            padding: 15px;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .add-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .add-btn:hover::before {
            left: 100%;
        }

        .add-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
        }

        /* Progress Graph */
        .progress-container {
            height: 200px;
            margin-top: 15px;
        }

        /* Tips Section */
        .tips-section {
            margin-top: 40px;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .tip-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .tip-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        .tip-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .tip-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .tip-content {
            color: var(--text-light);
            line-height: 1.5;
        }

        /* To-Do List Section */
        .todo-section {
            margin-top: 40px;
        }

        .todo-list {
            list-style: none;
            margin-top: 15px;
        }

        .todo-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            margin-bottom: 10px;
            background: var(--light);
            border-radius: 10px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .todo-item:hover {
            background: var(--primary-light);
        }

        .todo-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .todo-content {
            flex: 1;
        }

        .todo-subject {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-bottom: 5px;
        }

        .todo-topic {
            font-weight: 600;
        }

        .todo-revision {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .todo-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .todo-item.past-due {
            border-left: 4px solid var(--warning);
        }

        .todo-item.future {
            opacity: 0.7;
        }

        .todo-item.future .todo-checkbox {
            pointer-events: none;
            opacity: 0.5;
        }

        /* Backlog Section */
        .backlog-section {
            margin-top: 40px;
        }

        /* Drawer */
        .drawer {
            position: fixed;
            top: 0;
            right: -350px;
            width: 350px;
            height: 100%;
            background: var(--sidebar-bg);
            padding: 20px;
            transition: right 0.3s ease;
            z-index: 100;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            border-left: 1px solid var(--border);
            overflow-y: auto;
            overflow-x: hidden;
        }

        .drawer.open {
            right: 0;
        }

        .drawer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
            position: relative;
        }

        .drawer-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
        }

        .close-drawer {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .close-drawer:hover {
            transform: rotate(90deg);
        }

        .drawer-menu {
            list-style: none;
            margin-bottom: 30px;
        }

        .drawer-menu li {
            margin-bottom: 15px;
        }

        .drawer-menu a {
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--text);
            text-decoration: none;
            font-size: 1.1rem;
            padding: 10px;
            border-radius: 10px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .drawer-menu a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--primary-light), transparent);
            transition: left 0.5s;
        }

        .drawer-menu a:hover::before {
            left: 100%;
        }

        .drawer-menu a:hover {
            background: var(--primary-light);
        }

        .drawer-menu i {
            font-size: 1.3rem;
            width: 30px;
            color: var(--primary);
        }

        .drawer-section {
            margin-bottom: 30px;
        }

        .drawer-section-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary);
            font-weight: 600;
        }

        .drawer-section-content {
            color: var(--text-light);
            line-height: 1.5;
        }

        .theme-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .theme-option {
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .theme-option:hover {
            transform: scale(1.05);
        }

        .theme-option.active {
            border-color: var(--primary);
        }

        .theme-light {
            background: linear-gradient(135deg, #f0f4ff 0%, #a4fdc0 100%);
            color: #334155;
        }

        .theme-dark {
            background: linear-gradient(135deg, #090d18 0%, #685321 100%);
            color: #ffffff;
        }

        .theme-semi-dark {
            background: linear-gradient(135deg, #1e293b 0%, #335b94 100%);
            color: #e2e8f0;
        }

        .theme-colorful {
            background: linear-gradient(135deg, #ff6b6b 0%, #d99c22 100%);
            color: #334155;
        }

        .theme-ocean {
            background: linear-gradient(135deg, #1a73e8 0%, #00bcd4 100%);
            color: white;
        }

        .contact-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .contact-link:hover {
            transform: translateX(5px);
        }

        /* Drawer Doodles */
        .drawer-doodle {
            position: absolute;
            font-size: 3rem;
            opacity: 0.1;
            pointer-events: none;
            z-index: -1;
            animation: float 10s infinite ease-in-out;
        }

        .drawer-doodle-1 {
            top: 10%;
            right: 10%;
            color: var(--primary);
            animation-delay: 0s;
        }

        .drawer-doodle-2 {
            bottom: 20%;
            left: 10%;
            color: var(--accent);
            animation-delay: 2s;
        }

        .drawer-doodle-3 {
            bottom: 10%;
            right: 20%;
            color: var(--success);
            animation-delay: 4s;
        }

        /* Menu Button - Shine Button Style */
        .menu-btn {
            position: relative;
            margin: 0;
            padding: 12px 20px;
            outline: none;
            text-decoration: none;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            text-transform: uppercase;
            background-color: var(--light);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--primary);
            font-weight: 400;
            font-family: inherit;
            z-index: 0;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.02, 0.01, 0.47, 1);
        }

        .menu-btn span {
            color: var(--primary);
            font-size: 14px;
            font-weight: 500;
            letter-spacing: 0.7px;
        }

        .menu-btn:hover {
            animation: rotate624 0.7s ease-in-out both;
        }

        .menu-btn:hover span {
            animation: storm1261 0.7s ease-in-out both;
            animation-delay: 0.06s;
        }

        @keyframes rotate624 {
            0% {
                transform: rotate(0deg) translate3d(0, 0, 0);
            }

            25% {
                transform: rotate(3deg) translate3d(0, 0, 0);
            }

            50% {
                transform: rotate(-3deg) translate3d(0, 0, 0);
            }

            75% {
                transform: rotate(1deg) translate3d(0, 0, 0);
            }

            100% {
                transform: rotate(0deg) translate3d(0, 0, 0);
            }
        }

        @keyframes storm1261 {
            0% {
                transform: translate3d(0, 0, 0) translateZ(0);
            }

            25% {
                transform: translate3d(4px, 0, 0) translateZ(0);
            }

            50% {
                transform: translate3d(-3px, 0, 0) translateZ(0);
            }

            75% {
                transform: translate3d(2px, 0, 0) translateZ(0);
            }

            100% {
                transform: translate3d(0, 0, 0) translateZ(0);
            }
        }

        .btn-shine {
            border: 1px solid;
            overflow: hidden;
            position: relative;
        }

        .btn-shine:after {
            background: var(--accent);
            content: "";
            height: 155px;
            left: -75px;
            opacity: 0.4;
            position: absolute;
            top: -50px;
            transform: rotate(35deg);
            transition: all 550ms cubic-bezier(0.19, 1, 0.22, 1);
            width: 50px;
            z-index: -10;
        }

        .btn-shine:hover:after {
            left: 120%;
            transition: all 550ms cubic-bezier(0.19, 1, 0.22, 1);
        }

        /* Notification Modal */
        .notification-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .notification-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .notification-content {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .notification-modal.active .notification-content {
            transform: translateY(0);
        }

        .notification-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .notification-message {
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .notification-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .notification-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .notification-btn.primary {
            background: var(--primary);
            color: white;
        }

        .notification-btn.secondary {
            background: var(--light);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .notification-btn:hover {
            transform: translateY(-2px);
        }

        /* Share Modal */
        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .share-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .share-content {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .share-modal.active .share-content {
            transform: translateY(0);
        }

        .share-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .share-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .share-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 15px;
            border-radius: 10px;
            background: var(--light);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .share-option:hover {
            background: var(--primary-light);
            transform: translateY(-5px);
        }

        .share-icon {
            font-size: 2rem;
        }

        .share-name {
            font-size: 0.9rem;
            text-align: center;
        }

        .share-link {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .share-input {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--light);
            color: var(--text);
        }

        .copy-btn {
            padding: 10px 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
            border-top: 1px solid var(--border);
            color: var(--text-light);
        }

        /* Custom Subject Input */
        .custom-subject-input {
            margin-top: 10px;
        }

        /* Progress Modal */
        .progress-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .progress-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .progress-content {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .progress-modal.active .progress-content {
            transform: translateY(0);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .progress-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
        }

        .close-progress {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Flashcards - New Design */
        .flashcards-container {
            margin-top: 20px;
        }

        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 300px;
            perspective: 1000px;
            font-family: sans-serif;
            margin-bottom: 20px;
        }

        .title {
            font-size: 1.5em;
            font-weight: 900;
            text-align: center;
            margin: 0;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            box-shadow: 0 8px 14px 0 rgba(0,0,0,0.2);
            position: absolute;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border: 1px solid var(--primary);
            border-radius: 1rem;
            padding: 20px;
        }

        .flip-card-front {
            background: linear-gradient(120deg, var(--primary-light) 60%, var(--light) 88%,
               var(--accent) 40%, rgba(255, 127, 80, 0.603) 48%);
            color: var(--primary);
        }

        .flip-card-back {
            background: linear-gradient(120deg, var(--accent) 30%, var(--primary) 88%,
               var(--primary-light) 40%, var(--light) 78%);
            color: white;
            transform: rotateY(180deg);
            overflow-y: auto;
        }

        .flashcard-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .flashcard-btn {
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .flashcard-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .flashcard-btn:disabled {
            background: var(--text-light);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .flashcard-counter {
            text-align: center;
            margin-top: 10px;
            color: var(--text-light);
        }

        /* Congratulations Animation */
        .congratulations {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .congratulations.active {
            opacity: 1;
            visibility: visible;
        }

        .congratulations-content {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: scale(0.8);
            transition: transform 0.5s ease;
        }

        .congratulations.active .congratulations-content {
            transform: scale(1);
        }

        .congratulations-icon {
            font-size: 4rem;
            color: var(--success);
            margin-bottom: 20px;
            animation: bounce 1s infinite alternate;
        }

        @keyframes bounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-20px); }
        }

        .congratulations-title {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .congratulations-message {
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* 3D Elements */
        .three-d-card {
            transform-style: preserve-3d;
            perspective: 1000px;
            transition: transform 0.5s;
        }

        .three-d-card:hover {
            transform: rotateY(10deg) rotateX(5deg);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }

            .topic-form {
                grid-template-columns: 1fr;
            }

            .add-btn {
                grid-column: span 1;
            }

            .drawer {
                width: 100%;
                right: -100%;
            }

            .share-options {
                grid-template-columns: repeat(2, 1fr);
            }

            .progress-content {
                padding: 20px;
            }

            .welcome-title {
                font-size: 2.2rem;
            }

            .slideshow-container {
                height: 250px;
            }

            .input-container {
                flex-direction: column;
            }

            .form-select, .form-input {
                border-radius: 0.8rem;
            }

            .add-btn {
                padding: 1rem;
                border-radius: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Theme Background -->
    <div class="theme-background light-theme-bg" id="themeBackground"></div>

    <!-- Background Illustrations -->
    <div class="bg-illustration illustration-1">
        <i class="fas fa-brain"></i>
    </div>
    <div class="bg-illustration illustration-2">
        <i class="fas fa-book-open"></i>
    </div>
    <div class="bg-illustration illustration-3">
        <i class="fas fa-graduation-cap"></i>
    </div>
    <div class="bg-illustration illustration-4">
        <i class="fas fa-lightbulb"></i>
    </div>
    <div class="pattern-dots"></div>
    
    <!-- Doodles -->
    <div class="doodle doodle-1">
        <i class="fas fa-star"></i>
    </div>
    <div class="doodle doodle-2">
        <i class="fas fa-rocket"></i>
    </div>
    <div class="doodle doodle-3">
        <i class="fas fa-bolt"></i>
    </div>

    <!-- Floating Shapes -->
    <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
    </div>

    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
            <h1 class="welcome-title">RATTAFICATION</h1>
            <p class="welcome-subtitle">Master RRB/SSC/Banking exams with scientific revision scheduling</p>
            
            <!-- Slideshow -->
            <div class="slideshow-container">
                <div class="slide active">
                    <div class="slide-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="slide-title">Active Recall</div>
                    <div class="slide-content">Strengthen memory pathways by testing yourself instead of just re-reading</div>
                </div>
                <div class="slide">
                    <div class="slide-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="slide-title">Spaced Repetition</div>
                    <div class="slide-content">Automated scheduling based on scientifically proven intervals</div>
                </div>
                <div class="slide">
                    <div class="slide-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="slide-title">Progress Tracking</div>
                    <div class="slide-content">Monitor your learning journey with detailed analytics</div>
                </div>
                <div class="slide">
                    <div class="slide-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="slide-title">Exam Success</div>
                    <div class="slide-content">Optimized for RRB, SSC, Banking and other competitive exams</div>
                </div>
            </div>
            
            <input type="text" class="name-input" id="userName" placeholder="Enter your name">
            <button class="start-btn" id="startBtn">Start Exam Preparation</button>
        </div>
    </div>

    <!-- Main App Content -->
    <div class="app-content" id="appContent">
        <div class="container">
            <!-- Header -->
            <header>
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div>
                        <div class="logo-text">RATTAFICATION</div>
                    </div>
                </div>
                <button class="menu-btn btn-shine" id="menuBtn">
                    <span>Menu</span>
                </button>
            </header>

            <!-- User Greeting -->
            <div class="user-greeting" id="userGreeting">
                Welcome back, <span id="displayName">User</span>! Ready for today's revision?
            </div>

            <!-- Dashboard -->
            <div class="dashboard">
                <!-- Today's Revisions -->
                <div class="card three-d-card">
                    <div class="card-title">
                        <i class="fas fa-tasks"></i>
                        Today's Revisions
                    </div>
                    <div id="todayRevisions">
                        <p>No revisions scheduled for today.</p>
                    </div>
                </div>

                <!-- Progress Overview -->
                <div class="card three-d-card">
                    <div class="card-title">
                        <i class="fas fa-chart-line"></i>
                        Progress Overview
                    </div>
                    <div class="progress-container">
                        <canvas id="progressChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Revision Calendar -->
            <div class="calendar-container">
                <div class="card three-d-card">
                    <div class="card-title">
                        <i class="fas fa-calendar-alt"></i>
                        Revision Calendar
                    </div>
                    <div class="calendar-header">
                        <h3 id="currentMonth">June 2023</h3>
                        <div class="calendar-nav">
                            <button id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                            <button id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div class="calendar" id="calendar">
                        <!-- Calendar will be generated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Add Topic Section -->
            <div class="add-topic-section">
                <div class="card three-d-card">
                    <div class="card-title">
                        <i class="fas fa-plus-circle"></i>
                        Add Topic for Revision
                    </div>
                    <div class="topic-form">
                        <div class="form-group">
                            <label class="form-label">Subject</label>
                            <div class="input-container">
                                <select class="form-select" id="subjectSelect">
                                    <option value="">Select a subject</option>
                                    <option value="math">Quantitative Aptitude</option>
                                    <option value="reasoning">Reasoning Ability</option>
                                    <option value="english">English Language</option>
                                    <option value="gk">General Knowledge</option>
                                    <option value="computer">Computer Knowledge</option>
                                    <option value="banking">Banking Awareness</option>
                                    <option value="custom">Custom Subject</option>
                                </select>
                            </div>
                            <div class="custom-subject-input" id="customSubjectGroup" style="display: none;">
                                <div class="input-container">
                                    <input type="text" class="form-input" id="customSubject" placeholder="Enter custom subject name">
                                </div>
                            </div>
                        </div>

                        <div class="form-group" id="chapterGroup">
                            <label class="form-label">Chapter/Topic</label>
                            <div class="input-container">
                                <select class="form-select" id="chapterSelect">
                                    <option value="">Select a chapter</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group" id="customTopicGroup" style="display: none;">
                            <label class="form-label">Custom Topic</label>
                            <div class="input-container">
                                <input type="text" class="form-input" id="customTopic" placeholder="Enter topic name">
                            </div>
                        </div>

                        <button class="add-btn btn-shine" id="addTopicBtn">
                            <span>Add to Revision Schedule</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- To-Do List -->
            <div class="todo-section">
                <div class="card three-d-card">
                    <div class="card-title">
                        <i class="fas fa-list-check"></i>
                        Revision To-Do List
                    </div>
                    <div id="todoList">
                        <p>No revisions scheduled. Add topics to get started.</p>
                    </div>
                </div>
            </div>

            <!-- Backlog Section -->
            <div class="backlog-section">
                <div class="card three-d-card">
                    <div class="card-title">
                        <i class="fas fa-history"></i>
                        Backlog - Missed Revisions
                    </div>
                    <div id="backlogList">
                        <p>No missed revisions. Great job!</p>
                    </div>
                </div>
            </div>

            <!-- Progress Timeline -->
            <div class="todo-section">
                <div class="card three-d-card">
                    <div class="card-title">
                        <i class="fas fa-chart-bar"></i>
                        Revision Progress Timeline
                    </div>
                    <div class="progress-container">
                        <canvas id="timelineChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Flashcards Section -->
            <div class="tips-section">
                <div class="card three-d-card">
                    <div class="card-title">
                        <i class="fas fa-lightbulb"></i>
                        Exam Preparation Tips (Flashcards)
                    </div>
                    <div class="flashcards-container">
                        <div class="flip-card" id="flashcard">
                            <div class="flip-card-inner">
                                <div class="flip-card-front">
                                    <p class="title" id="flashcardTitle">Active Recall</p>
                                    <p>Click to flip the card</p>
                                </div>
                                <div class="flip-card-back">
                                    <p class="title">Active Recall</p>
                                    <p id="flashcardContent">Regularly test yourself instead of just re-reading. This strengthens memory pathways and improves retention.</p>
                                </div>
                            </div>
                        </div>
                        <div class="flashcard-nav">
                            <button class="flashcard-btn btn-shine" id="prevFlashcard">
                                <span>Previous</span>
                            </button>
                            <button class="flashcard-btn btn-shine" id="nextFlashcard">
                                <span>Next</span>
                            </button>
                        </div>
                        <div class="flashcard-counter" id="flashcardCounter">1/15</div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer>
                <p>RATTAFICATION - Scientific Revision Scheduling for RRB/SSC/Banking Exams</p>
            </footer>
        </div>
    </div>

    <!-- Drawer -->
    <div class="drawer" id="drawer">
        <!-- Drawer Doodles -->
        <div class="drawer-doodle drawer-doodle-1">
            <i class="fas fa-book"></i>
        </div>
        <div class="drawer-doodle drawer-doodle-2">
            <i class="fas fa-pen"></i>
        </div>
        <div class="drawer-doodle drawer-doodle-3">
            <i class="fas fa-graduation-cap"></i>
        </div>
        
        <div class="drawer-header">
            <div class="drawer-title">Menu</div>
            <button class="close-drawer" id="closeDrawer">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <ul class="drawer-menu">
            <li><a href="#"><i class="fas fa-home"></i> Dashboard</a></li>
            <li><a href="#" id="progressLink"><i class="fas fa-chart-bar"></i> Progress</a></li>
            <li><a href="#" id="themeLink"><i class="fas fa-palette"></i> Theme Settings</a></li>
            <li><a href="#" id="shareAppLink"><i class="fas fa-share-alt"></i> Share App</a></li>
            <li><a href="#" id="aboutLink"><i class="fas fa-info-circle"></i> About</a></li>
            <li><a href="#" id="doubtsLink"><i class="fas fa-question-circle"></i> Any Doubts</a></li>
        </ul>

        <div class="drawer-section" id="themeSection" style="display: none;">
            <div class="drawer-section-title">Theme Settings</div>
            <div class="theme-options">
                <div class="theme-option theme-light active" data-theme="light">
                    Light
                </div>
                <div class="theme-option theme-dark" data-theme="dark">
                    Dark
                </div>
                <div class="theme-option theme-semi-dark" data-theme="semi-dark">
                    Semi Dark
                </div>
                <div class="theme-option theme-colorful" data-theme="colorful">
                    Colorful
                </div>
                <div class="theme-option theme-ocean" data-theme="ocean">
                    Ocean
                </div>
            </div>
        </div>

        <div class="drawer-section" id="aboutSection" style="display: none;">
            <div class="drawer-section-title">About RATTAFICATION</div>
            <div class="drawer-section-content">
                <p>RATTAFICATION is a scientifically designed exam preparation app that helps students master competitive exams like RRB, SSC, and Banking through optimized revision scheduling.</p>
                <p>Using principles of spaced repetition and active recall, the app schedules revisions at scientifically proven intervals to maximize retention and minimize forgetting.</p>
            </div>
        </div>

        <div class="drawer-section" id="doubtsSection" style="display: none;">
            <div class="drawer-section-title">Any Doubts?</div>
            <div class="drawer-section-content">
                <p>If you have any questions or need help with the app, feel free to contact us:</p>
                <a href="https://t.me/shailuk7" class="contact-link" target="_blank">
                    <i class="fas fa-envelope"></i>
                    Contact with Support
                </a>
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div class="notification-modal" id="notificationModal">
        <div class="notification-content">
            <div class="notification-title">Revision Reminder</div>
            <div class="notification-message" id="notificationMessage">
                You have revisions scheduled for today. Check your dashboard to see what needs to be reviewed.
            </div>
            <div class="notification-actions">
                <button class="notification-btn secondary" id="notificationLater">Later</button>
                <button class="notification-btn primary" id="notificationGo">Go to Revisions</button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="share-modal" id="shareModal">
        <div class="share-content">
            <div class="share-title">Share App</div>
            <div class="share-options">
                <div class="share-option" data-platform="whatsapp">
                    <div class="share-icon" style="color: #25D366;">
                        <i class="fab fa-whatsapp"></i>
                    </div>
                    <div class="share-name">WhatsApp</div>
                </div>
                <div class="share-option" data-platform="telegram">
                    <div class="share-icon" style="color: #0088cc;">
                        <i class="fab fa-telegram"></i>
                    </div>
                    <div class="share-name">Telegram</div>
                </div>
                <div class="share-option" data-platform="facebook">
                    <div class="share-icon" style="color: #1877F2;">
                        <i class="fab fa-facebook"></i>
                    </div>
                    <div class="share-name">Facebook</div>
                </div>
                <div class="share-option" data-platform="twitter">
                    <div class="share-icon" style="color: #1DA1F2;">
                        <i class="fab fa-twitter"></i>
                    </div>
                    <div class="share-name">Twitter</div>
                </div>
            </div>
            <div class="share-link">
                <input type="text" class="share-input" id="shareInput" value="https://skpro7.github.io/rattafication/" readonly>
                <button class="copy-btn" id="copyLinkBtn">Copy</button>
            </div>
            <div class="notification-actions" style="margin-top: 20px;">
                <button class="notification-btn secondary" id="closeShareModal">Close</button>
            </div>
        </div>
    </div>

    <!-- Progress Modal -->
    <div class="progress-modal" id="progressModal">
        <div class="progress-content">
            <div class="progress-header">
                <div class="progress-title">Detailed Progress Report</div>
                <button class="close-progress" id="closeProgress">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="progress-container">
                <canvas id="detailedProgressChart"></canvas>
            </div>
            <div class="card" style="margin-top: 20px;">
                <div class="card-title">
                    <i class="fas fa-list"></i>
                    Topic Completion History (Last 30 Days)
                </div>
                <div id="progressHistory">
                    <!-- Progress history will be generated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Congratulations Animation -->
    <div class="congratulations" id="congratulations">
        <div class="congratulations-content">
            <div class="congratulations-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <div class="congratulations-title">Congratulations!</div>
            <div class="congratulations-message" id="congratulationsMessage">
                Great job completing your revision! Keep up the good work.
            </div>
            <button class="notification-btn primary" id="closeCongratulations">Continue</button>
        </div>
    </div>

    <script>
        // DOM Elements
        const welcomeScreen = document.getElementById('welcomeScreen');
        const appContent = document.getElementById('appContent');
        const userNameInput = document.getElementById('userName');
        const startBtn = document.getElementById('startBtn');
        const userGreeting = document.getElementById('userGreeting');
        const displayName = document.getElementById('displayName');
        const menuBtn = document.getElementById('menuBtn');
        const drawer = document.getElementById('drawer');
        const closeDrawer = document.getElementById('closeDrawer');
        const subjectSelect = document.getElementById('subjectSelect');
        const chapterSelect = document.getElementById('chapterSelect');
        const customTopicGroup = document.getElementById('customTopicGroup');
        const chapterGroup = document.getElementById('chapterGroup');
        const customSubjectGroup = document.getElementById('customSubjectGroup');
        const customSubjectInput = document.getElementById('customSubject');
        const addTopicBtn = document.getElementById('addTopicBtn');
        const calendar = document.getElementById('calendar');
        const currentMonth = document.getElementById('currentMonth');
        const prevMonthBtn = document.getElementById('prevMonth');
        const nextMonthBtn = document.getElementById('nextMonth');
        const todayRevisions = document.getElementById('todayRevisions');
        const todoList = document.getElementById('todoList');
        const backlogList = document.getElementById('backlogList');
        const aboutLink = document.getElementById('aboutLink');
        const doubtsLink = document.getElementById('doubtsLink');
        const themeLink = document.getElementById('themeLink');
        const progressLink = document.getElementById('progressLink');
        const aboutSection = document.getElementById('aboutSection');
        const doubtsSection = document.getElementById('doubtsSection');
        const themeSection = document.getElementById('themeSection');
        const shareAppLink = document.getElementById('shareAppLink');
        const notificationModal = document.getElementById('notificationModal');
        const notificationMessage = document.getElementById('notificationMessage');
        const notificationLater = document.getElementById('notificationLater');
        const notificationGo = document.getElementById('notificationGo');
        const shareModal = document.getElementById('shareModal');
        const shareInput = document.getElementById('shareInput');
        const copyLinkBtn = document.getElementById('copyLinkBtn');
        const closeShareModal = document.getElementById('closeShareModal');
        const progressModal = document.getElementById('progressModal');
        const closeProgress = document.getElementById('closeProgress');
        const detailedProgressChart = document.getElementById('detailedProgressChart');
        const progressHistory = document.getElementById('progressHistory');
        const flashcard = document.getElementById('flashcard');
        const flashcardTitle = document.getElementById('flashcardTitle');
        const flashcardContent = document.getElementById('flashcardContent');
        const prevFlashcard = document.getElementById('prevFlashcard');
        const nextFlashcard = document.getElementById('nextFlashcard');
        const flashcardCounter = document.getElementById('flashcardCounter');
        const congratulations = document.getElementById('congratulations');
        const congratulationsMessage = document.getElementById('congratulationsMessage');
        const closeCongratulations = document.getElementById('closeCongratulations');
        const themeOptions = document.querySelectorAll('.theme-option');
        const slides = document.querySelectorAll('.slide');
        const themeBackground = document.getElementById('themeBackground');

        // App State
        let currentUser = '';
        let currentDate = new Date();
        let topics = JSON.parse(localStorage.getItem('topics')) || [];
        let notificationShownToday = localStorage.getItem('notificationShownToday') || false;
        let currentTheme = localStorage.getItem('currentTheme') || 'light';
        let currentFlashcardIndex = 0;
        let currentSlideIndex = 0;

        // Subject data for RRB/SSC/Banking exams
        const subjects = {
            math: {
                name: 'Quantitative Aptitude',
                icon: 'fas fa-calculator',
                color: '#4cc9f0',
                chapters: [
                    'Number System', 'Decimals', 'Fractions', 'LCM, HCF', 'Ratio and Proportions',
                    'Percentage', 'Mensuration', 'Time and Work', 'Time and Distance',
                    'Simple and Compound Interest', 'Profit and Loss', 'Elementary Algebra',
                    'Geometry and Trigonometry', 'Elementary Statistics', 'Custom Topic'
                ]
            },
            reasoning: {
                name: 'General Intelligence & Reasoning',
                icon: 'fas fa-puzzle-piece',
                color: '#f72585',
                chapters: [
                    'Analogies', 'Completion of Number and Alphabetical Series', 'Coding and Decoding',
                    'Mathematical Operations', 'Similarities and Differences', 'Relationships',
                    'Analytical Reasoning', 'Syllogism', 'Jumbling', 'Venn Diagrams', 'Puzzle',
                    'Data Sufficiency', 'Statement- Conclusion', 'Statement- Courses of Action',
                    'Decision Making', 'Maps', 'Interpretation of Graphs', 'Custom Topic'
                ]
            },
            english: {
                name: 'English Language',
                icon: 'fas fa-language',
                color: '#4895ef',
                chapters: [
                    'Reading Comprehension', 'Cloze Test', 'Error Spotting', 'Sentence Improvement',
                    'Fill in the Blanks', 'Para Jumbles', 'Vocabulary', 'Grammar', 'Idioms & Phrases',
                    'One Word Substitution', 'Active & Passive Voice', 'Direct & Indirect Speech', 
                    'Spelling Check', 'Custom Topic'
                ]
            },
            gk: {
                name: 'General Awareness',
                icon: 'fas fa-globe',
                color: '#7209b7',
                chapters: [
                    'Current Events of National and International Importance', 'Games and Sports',
                    'Art and Culture of India', 'Indian Literature', 'Monuments and Places of India',
                    'General Science and Life Science', 'History of India and Freedom Struggle',
                    'Physical, Social and Economic Geography of India and the World',
                    'Indian Polity and Governance', 'General Scientific and Technological Developments',
                    'UN and Other Important World Organizations', 'Environmental Issues',
                    'Basics of Computers and Computer Applications', 'Common Abbreviations',
                    'Transport Systems in India', 'Indian Economy', 'Famous Personalities',
                    'Flagship Government Programs', 'Flora and Fauna of India',
                    'Important Government and Public Sector Organisations', 'Current GK', 'Custom Topic'
                ]
            },
            computer: {
                name: 'Computer Knowledge',
                icon: 'fas fa-laptop-code',
                color: '#3a0ca3',
                chapters: [
                    'Computer Fundamentals', 'Hardware & Software', 'Operating System', 'MS Office',
                    'Internet & Networking', 'Database Management', 'Computer Security', 'Programming Concepts',
                    'Computer Abbreviations', 'Input & Output Devices', 'Memory', 'Computer Languages', 'Custom Topic'
                ]
            },
            banking: {
                name: 'Banking Awareness',
                icon: 'fas fa-university',
                color: '#38b000',
                chapters: [
                    'Banking History', 'RBI & Its Functions', 'Banking Terms', 'Types of Accounts',
                    'Negotiable Instruments', 'Payment Systems', 'Financial Institutions', 'Monetary Policy',
                    'Non-Performing Assets', 'KYC Guidelines', 'Banking Ombudsman', 'Recent Banking Reforms', 'Custom Topic'
                ]
            },
            custom: {
                name: 'Custom Subject',
                icon: 'fas fa-edit',
                color: '#6c757d',
                chapters: ['Custom Topic']
            }
        };

        // Flashcards data
        const flashcards = [
            {
                title: "Active Recall",
                content: "Regularly test yourself instead of just re-reading. This strengthens memory pathways and improves retention.       ,                 "
            },
            {
                title: "Spaced Repetition",
                content: "Review material at increasing intervals to combat the forgetting curve. This app automates this process for you.                        "
            },
            {
                title: "Interleaving",
                content: "Mix different subjects or topics during study sessions for better retention and understanding.                "
            },
            {
                title: "Pomodoro Technique",
                content: "Study in focused 25-minute intervals with 5-minute breaks. This improves concentration and prevents burnout. 5      25                  "
            },
            {
                title: "Mind Mapping",
                content: "Create visual diagrams to organize information. This helps in understanding complex topics and improves memory.                        "
            },
            {
                title: "Meditation for Focus",
                content: "Practice 10 minutes of meditation daily to improve focus and reduce stress.          10     "
            },
            {
                title: "Fast Revision Techniques",
                content: "Use mnemonics, acronyms, and visualization for quick revision before exams.        ,      "
            },
            {
                title: "Long Term Memory",
                content: "Connect new information to what you already know. This creates stronger neural connections and improves long-term retention.                        "
            },
            {
                title: "Effective Note Taking",
                content: "Use the Cornell method for note-taking: divide page into cues, notes, and summary sections for better organization.             :   ,       "
            },
            {
                title: "Study Environment",
                content: "Create a dedicated study space with good lighting, minimal distractions, and all necessary materials.  ,             "
            },
            {
                title: "Healthy Study Habits",
                content: "Get adequate sleep, exercise regularly, and maintain a balanced diet for optimal brain function.        ,          "
            },
            {
                title: "Time Management",
                content: "Prioritize tasks using the Eisenhower Matrix: urgent/important, important/not urgent, urgent/not important, not urgent/not important.         : /, / , / ,  / "
            },
            {
                title: "Exam Strategy",
                content: "Read all questions first, start with easier ones, manage time wisely, and review answers if time permits.    ,     ,               "
            },
            {
                title: "Stress Management",
                content: "Practice deep breathing, take short breaks, and maintain a positive mindset during study sessions.      ,            "
            },
            {
                title: "Revision Schedule",
                content: "Follow the 1-3-7-15-30 day revision pattern for optimal retention of information.       1-3-7-15-30       "
            }
        ];

        // Initialize the app
        function initApp() {
            // Apply saved theme
            applyTheme(currentTheme);
            
            // Set active theme option
            themeOptions.forEach(option => {
                if (option.getAttribute('data-theme') === currentTheme) {
                    option.classList.add('active');
                }
            });
            
            // Check if user already exists in localStorage
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = savedUser;
                showApp();
            }

            // Start slideshow
            startSlideshow();

            // Set up event listeners
            startBtn.addEventListener('click', startApp);
            menuBtn.addEventListener('click', toggleDrawer);
            closeDrawer.addEventListener('click', toggleDrawer);
            subjectSelect.addEventListener('change', handleSubjectChange);
            chapterSelect.addEventListener('change', handleChapterChange);
            addTopicBtn.addEventListener('click', addTopic);
            prevMonthBtn.addEventListener('click', showPreviousMonth);
            nextMonthBtn.addEventListener('click', showNextMonth);
            aboutLink.addEventListener('click', showAbout);
            doubtsLink.addEventListener('click', showDoubts);
            themeLink.addEventListener('click', showTheme);
            progressLink.addEventListener('click', showProgressModal);
            shareAppLink.addEventListener('click', showShareModal);
            notificationLater.addEventListener('click', closeNotification);
            notificationGo.addEventListener('click', goToRevisions);
            copyLinkBtn.addEventListener('click', copyShareLink);
            closeShareModal.addEventListener('click', closeShareModalFunc);
            closeProgress.addEventListener('click', closeProgressModal);
            flashcard.addEventListener('click', flipFlashcard);
            prevFlashcard.addEventListener('click', showPrevFlashcard);
            nextFlashcard.addEventListener('click', showNextFlashcard);
            closeCongratulations.addEventListener('click', closeCongratulationsFunc);
            
            // Theme options
            themeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    applyTheme(theme);
                    
                    // Update active state
                    themeOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Save theme preference
                    localStorage.setItem('currentTheme', theme);
                });
            });
            
            // Share options
            document.querySelectorAll('.share-option').forEach(option => {
                option.addEventListener('click', function() {
                    const platform = this.getAttribute('data-platform');
                    shareOnPlatform(platform);
                });
            });

            // Initialize calendar
            renderCalendar();

            // Initialize progress chart
            initProgressChart();
            
            // Initialize timeline chart
            initTimelineChart();

            // Check for today's revisions
            checkTodaysRevisions();
            
            // Render to-do list
            renderTodoList();
            
            // Render backlog
            renderBacklog();

            // Initialize flashcards
            updateFlashcard();

            // Check if we should show notification
            checkForNotification();

            // Schedule daily notification at 5 AM
            scheduleDailyNotification();

            // Check for auto-removal of completed revisions
            checkAutoRemoval();
        }

        // Start slideshow
        function startSlideshow() {
            setInterval(() => {
                slides[currentSlideIndex].classList.remove('active');
                currentSlideIndex = (currentSlideIndex + 1) % slides.length;
                slides[currentSlideIndex].classList.add('active');
            }, 4000);
        }

        // Apply theme
        function applyTheme(theme) {
            document.body.className = theme + '-theme';
            currentTheme = theme;
            
            // Update theme background
            themeBackground.className = 'theme-background ' + theme + '-theme-bg';
            
            // Update chart colors based on theme
            updateChartColors();
        }

        // Update chart colors based on theme
        function updateChartColors() {
            // Update progress chart
            if (window.progressChartInstance) {
                const textColor = getComputedStyle(document.documentElement).getPropertyValue('--text');
                window.progressChartInstance.options.plugins.legend.labels.color = textColor;
                window.progressChartInstance.update();
            }
            
            // Update timeline chart
            if (window.timelineChartInstance) {
                const textColor = getComputedStyle(document.documentElement).getPropertyValue('--text');
                const gridColor = getComputedStyle(document.documentElement).getPropertyValue('--border');
                
                window.timelineChartInstance.options.plugins.legend.labels.color = textColor;
                window.timelineChartInstance.options.scales.x.grid.color = gridColor;
                window.timelineChartInstance.options.scales.x.ticks.color = textColor;
                window.timelineChartInstance.options.scales.y.grid.color = gridColor;
                window.timelineChartInstance.options.scales.y.ticks.color = textColor;
                window.timelineChartInstance.update();
            }
            
            // Update detailed progress chart
            if (window.detailedProgressChartInstance) {
                const textColor = getComputedStyle(document.documentElement).getPropertyValue('--text');
                const gridColor = getComputedStyle(document.documentElement).getPropertyValue('--border');
                
                window.detailedProgressChartInstance.options.plugins.legend.labels.color = textColor;
                window.detailedProgressChartInstance.options.scales.x.grid.color = gridColor;
                window.detailedProgressChartInstance.options.scales.x.ticks.color = textColor;
                window.detailedProgressChartInstance.options.scales.y.grid.color = gridColor;
                window.detailedProgressChartInstance.options.scales.y.ticks.color = textColor;
                window.detailedProgressChartInstance.update();
            }
        }

        // Start the app
        function startApp() {
            const name = userNameInput.value.trim();
            if (name) {
                currentUser = name;
                localStorage.setItem('currentUser', name);
                showApp();
            } else {
                alert('Please enter your name to continue.');
            }
        }

        // Show the main app
        function showApp() {
            welcomeScreen.style.opacity = '0';
            setTimeout(() => {
                welcomeScreen.style.display = 'none';
                appContent.style.display = 'block';
                displayName.textContent = currentUser;
            }, 800);
        }

        // Toggle drawer
        function toggleDrawer() {
            drawer.classList.toggle('open');
        }

        // Show about section in drawer
        function showAbout(e) {
            e.preventDefault();
            aboutSection.style.display = 'block';
            doubtsSection.style.display = 'none';
            themeSection.style.display = 'none';
        }

        // Show doubts section in drawer
        function showDoubts(e) {
            e.preventDefault();
            aboutSection.style.display = 'none';
            doubtsSection.style.display = 'block';
            themeSection.style.display = 'none';
        }

        // Show theme section in drawer
        function showTheme(e) {
            e.preventDefault();
            aboutSection.style.display = 'none';
            doubtsSection.style.display = 'none';
            themeSection.style.display = 'block';
        }

        // Show progress modal
        function showProgressModal(e) {
            e.preventDefault();
            progressModal.classList.add('active');
            initDetailedProgressChart();
            renderProgressHistory();
            toggleDrawer();
        }

        // Close progress modal
        function closeProgressModal() {
            progressModal.classList.remove('active');
        }

        // Show share modal
        function showShareModal(e) {
            e.preventDefault();
            shareModal.classList.add('active');
            toggleDrawer();
        }

        // Close share modal
        function closeShareModalFunc() {
            shareModal.classList.remove('active');
        }

        // Copy share link
        function copyShareLink() {
            shareInput.select();
            document.execCommand('copy');
            alert('Link copied to clipboard!');
        }

        // Share on specific platform
        function shareOnPlatform(platform) {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('Check out RATTAFICATION - the smart exam preparation app!');
            
            let shareUrl = '';
            
            switch(platform) {
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${text}%20${url}`;
                    break;
                case 'telegram':
                    shareUrl = `https://t.me/share/url?url=${url}&text=${text}`;
                    break;
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
                    break;
            }
            
            if (shareUrl) {
                window.open(shareUrl, '_blank');
            }
        }

        // Handle subject selection change
        function handleSubjectChange() {
            const selectedSubject = subjectSelect.value;
           
            // Update chapters based on selected subject
            chapterSelect.innerHTML = '<option value="">Select a chapter</option>';
           
            if (selectedSubject && subjects[selectedSubject]) {
                subjects[selectedSubject].chapters.forEach(chapter => {
                    const option = document.createElement('option');
                    option.value = chapter;
                    option.textContent = chapter;
                    chapterSelect.appendChild(option);
                });
            }
            
            // Show/hide custom subject input
            if (selectedSubject === 'custom') {
                customSubjectGroup.style.display = 'block';
                chapterGroup.style.display = 'none';
                customTopicGroup.style.display = 'block';
            } else {
                customSubjectGroup.style.display = 'none';
                chapterGroup.style.display = 'block';
                customTopicGroup.style.display = 'none';
            }
        }

        // Handle chapter selection change
        function handleChapterChange() {
            const selectedChapter = chapterSelect.value;
            
            if (selectedChapter === 'Custom Topic') {
                customTopicGroup.style.display = 'block';
            } else {
                customTopicGroup.style.display = 'none';
            }
        }

        // Add topic to revision schedule
        function addTopic() {
            const subject = subjectSelect.value;
            let subjectName, topicName;
           
            if (!subject) {
                alert('Please select a subject.');
                return;
            }
            
            if (subject === 'custom') {
                // Custom subject
                subjectName = customSubjectInput.value.trim();
                topicName = document.getElementById('customTopic').value.trim();
                
                if (!subjectName) {
                    alert('Please enter a custom subject name.');
                    return;
                }
                
                if (!topicName) {
                    alert('Please enter a topic name.');
                    return;
                }
            } else {
                // Predefined subject
                subjectName = subjects[subject].name;
                topicName = chapterSelect.value;
                
                if (!topicName) {
                    alert('Please select a chapter.');
                    return;
                }
                
                // If custom topic is selected, show input
                if (topicName === 'Custom Topic') {
                    const customTopic = document.getElementById('customTopic').value.trim();
                    if (!customTopic) {
                        alert('Please enter a topic name.');
                        return;
                    }
                    topicName = customTopic;
                }
            }

            // Calculate revision dates (Day 1, 3, 7, 15, 30)
            const today = new Date();
            const revisionDates = [
                new Date(today),
                new Date(today.getTime() + 2 * 24 * 60 * 60 * 1000), // Day 3
                new Date(today.getTime() + 6 * 24 * 60 * 60 * 1000), // Day 7
                new Date(today.getTime() + 14 * 24 * 60 * 60 * 1000), // Day 15
                new Date(today.getTime() + 29 * 24 * 60 * 60 * 1000) // Day 30
            ];
           
            const newTopic = {
                id: Date.now(),
                subject: subject,
                subjectName: subjectName,
                topicName: topicName,
                addedDate: today,
                revisionDates: revisionDates,
                completedRevisions: [false, false, false, false, false], // All revisions start as incomplete
                lastCompletionDate: null // Track when revisions were last completed
            };
           
            topics.push(newTopic);
            localStorage.setItem('topics', JSON.stringify(topics));
           
            // Reset form
            subjectSelect.value = '';
            chapterSelect.value = '';
            customSubjectInput.value = '';
            document.getElementById('customTopic').value = '';
            customSubjectGroup.style.display = 'none';
            customTopicGroup.style.display = 'none';
            chapterGroup.style.display = 'block';
           
            // Update UI
            renderCalendar();
            checkTodaysRevisions();
            initProgressChart();
            initTimelineChart();
            renderTodoList();
            renderBacklog();
           
            alert('Topic added to revision schedule successfully!');
        }

        // Render calendar
        function renderCalendar() {
            // Clear calendar
            calendar.innerHTML = '';
           
            // Set current month display
            currentMonth.textContent = currentDate.toLocaleString('default', { month: 'long', year: 'numeric' });
           
            // Get first day of month and number of days
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
            const daysInMonth = lastDay.getDate();
           
            // Add day headers
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayNames.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-day';
                dayHeader.style.fontWeight = 'bold';
                dayHeader.textContent = day;
                calendar.appendChild(dayHeader);
            });
           
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDay.getDay(); i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                calendar.appendChild(emptyDay);
            }
           
            // Add days of the month
            const today = new Date();
            today.setHours(0, 0, 0, 0);
           
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
               
                const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
               
                // Check if this is today
                if (date.getTime() === today.getTime()) {
                    dayElement.classList.add('current');
                }
               
                // Check if there are revisions scheduled for this day
                const revisionTopics = getRevisionsForDate(date);
                if (revisionTopics.length > 0) {
                    dayElement.classList.add('revision');
                   
                    // Add revision dots
                    const dotsContainer = document.createElement('div');
                    dotsContainer.className = 'revision-dots';
                   
                    revisionTopics.forEach(topic => {
                        const dot = document.createElement('div');
                        dot.className = `revision-dot dot-${topic.subject}`;
                        dotsContainer.appendChild(dot);
                    });
                   
                    dayElement.appendChild(dotsContainer);
                }
               
                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = day;
                dayElement.appendChild(dayNumber);
               
                calendar.appendChild(dayElement);
            }
        }

        // Get revisions for a specific date
        function getRevisionsForDate(date) {
            const revisions = [];
            const dateString = date.toDateString();
           
            topics.forEach(topic => {
                topic.revisionDates.forEach((revDate, index) => {
                    if (new Date(revDate).toDateString() === dateString && !topic.completedRevisions[index]) {
                        revisions.push({
                            subject: topic.subject,
                            topicName: topic.topicName
                        });
                    }
                });
            });
           
            return revisions;
        }

        // Show previous month
        function showPreviousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        // Show next month
        function showNextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        // Initialize progress chart
        function initProgressChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
           
            // Calculate completion data
            const totalRevisions = topics.length * 5; // 5 revisions per topic
            let completedRevisions = 0;
           
            topics.forEach(topic => {
                topic.completedRevisions.forEach(completed => {
                    if (completed) completedRevisions++;
                });
            });
           
            const completionRate = totalRevisions > 0 ? (completedRevisions / totalRevisions) * 100 : 0;
           
            // Destroy existing chart if it exists
            if (window.progressChartInstance) {
                window.progressChartInstance.destroy();
            }
           
            window.progressChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Completed', 'Remaining'],
                    datasets: [{
                        data: [completedRevisions, totalRevisions - completedRevisions],
                        backgroundColor: [
                            'rgba(67, 97, 238, 0.8)',
                            'rgba(226, 232, 240, 0.8)'
                        ],
                        borderColor: [
                            'rgba(67, 97, 238, 1)',
                            'rgba(226, 232, 240, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'var(--text)',
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw} revisions`;
                                }
                            }
                        }
                    },
                    cutout: '70%'
                }
            });
        }
        
        // Initialize detailed progress chart
        function initDetailedProgressChart() {
            const ctx = document.getElementById('detailedProgressChart').getContext('2d');
            
            // Calculate revisions by date for the last 30 days
            const today = new Date();
            const dates = [];
            const completedData = [];
            const scheduledData = [];
            
            for (let i = 29; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                dates.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
                
                let completed = 0;
                let scheduled = 0;
                
                topics.forEach(topic => {
                    topic.revisionDates.forEach((revDate, index) => {
                        const revisionDate = new Date(revDate);
                        revisionDate.setHours(0, 0, 0, 0);
                        
                        if (revisionDate.getTime() === date.getTime()) {
                            scheduled++;
                            if (topic.completedRevisions[index]) {
                                completed++;
                            }
                        }
                    });
                });
                
                completedData.push(completed);
                scheduledData.push(scheduled);
            }
            
            // Destroy existing chart if it exists
            if (window.detailedProgressChartInstance) {
                window.detailedProgressChartInstance.destroy();
            }
            
            window.detailedProgressChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'Completed Revisions',
                            data: completedData,
                            backgroundColor: 'rgba(67, 97, 238, 0.8)',
                            borderColor: 'rgba(67, 97, 238, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Scheduled Revisions',
                            data: scheduledData,
                            backgroundColor: 'rgba(114, 9, 183, 0.8)',
                            borderColor: 'rgba(114, 9, 183, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: 'var(--text)'
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                color: 'var(--text)',
                                maxTicksLimit: 10
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                color: 'var(--text)'
                            }
                        }
                    }
                }
            });
        }
        
        // Initialize timeline chart
        function initTimelineChart() {
            const ctx = document.getElementById('timelineChart').getContext('2d');
            
            // Calculate revisions by date for the last 30 days
            const today = new Date();
            const dates = [];
            const completedData = [];
            const scheduledData = [];
            
            for (let i = 29; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                dates.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
                
                let completed = 0;
                let scheduled = 0;
                
                topics.forEach(topic => {
                    topic.revisionDates.forEach((revDate, index) => {
                        const revisionDate = new Date(revDate);
                        revisionDate.setHours(0, 0, 0, 0);
                        
                        if (revisionDate.getTime() === date.getTime()) {
                            scheduled++;
                            if (topic.completedRevisions[index]) {
                                completed++;
                            }
                        }
                    });
                });
                
                completedData.push(completed);
                scheduledData.push(scheduled);
            }
            
            // Destroy existing chart if it exists
            if (window.timelineChartInstance) {
                window.timelineChartInstance.destroy();
            }
            
            window.timelineChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'Completed Revisions',
                            data: completedData,
                            borderColor: 'rgba(67, 97, 238, 1)',
                            backgroundColor: 'rgba(67, 97, 238, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Scheduled Revisions',
                            data: scheduledData,
                            borderColor: 'rgba(114, 9, 183, 1)',
                            backgroundColor: 'rgba(114, 9, 183, 0.1)',
                            borderDash: [5, 5],
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: 'var(--text)'
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'var(--border)'
                            },
                            ticks: {
                                color: 'var(--text)'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'var(--border)'
                            },
                            ticks: {
                                color: 'var(--text)'
                            }
                        }
                    }
                }
            });
        }

        // Check for today's revisions
        function checkTodaysRevisions() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
           
            const todaysRevisions = [];
           
            topics.forEach(topic => {
                topic.revisionDates.forEach((revDate, index) => {
                    const revisionDate = new Date(revDate);
                    revisionDate.setHours(0, 0, 0, 0);
                   
                    if (revisionDate.getTime() === today.getTime() && !topic.completedRevisions[index]) {
                        todaysRevisions.push({
                            id: topic.id,
                            subject: topic.subject,
                            subjectName: topic.subjectName,
                            topicName: topic.topicName,
                            revisionIndex: index
                        });
                    }
                });
            });
           
            if (todaysRevisions.length > 0) {
                let html = '<ul style="list-style: none; padding: 0;">';
                todaysRevisions.forEach(rev => {
                    html += `<li style="padding: 8px 0; border-bottom: 1px solid var(--border);">
                        <strong>${rev.subjectName}:</strong> ${rev.topicName} <br>
                        <small style="color: var(--text-light);">Revision ${rev.revisionIndex + 1}</small>
                    </li>`;
                });
                html += '</ul>';
                todayRevisions.innerHTML = html;
            } else {
                todayRevisions.innerHTML = '<p style="color: var(--text-light);">No revisions scheduled for today.</p>';
            }
        }
        
        // Render to-do list
        function renderTodoList() {
            if (topics.length === 0) {
                todoList.innerHTML = '<p style="color: var(--text-light);">No revisions scheduled. Add topics to get started.</p>';
                return;
            }
            
            // Get all upcoming revisions (next 7 days)
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const nextWeek = new Date(today);
            nextWeek.setDate(today.getDate() + 7);
            
            const upcomingRevisions = [];
            
            topics.forEach(topic => {
                topic.revisionDates.forEach((revDate, index) => {
                    const revisionDate = new Date(revDate);
                    revisionDate.setHours(0, 0, 0, 0);
                    
                    // Show revisions for today even if completed, so user can uncheck if needed
                    if (revisionDate >= today && revisionDate <= nextWeek && 
                        (!topic.completedRevisions[index] || revisionDate.getTime() === today.getTime())) {
                        upcomingRevisions.push({
                            id: topic.id,
                            subject: topic.subject,
                            subjectName: topic.subjectName,
                            topicName: topic.topicName,
                            revisionIndex: index,
                            date: revisionDate,
                            completed: topic.completedRevisions[index]
                        });
                    }
                });
            });
            
            // Sort by date
            upcomingRevisions.sort((a, b) => a.date - b.date);
            
            if (upcomingRevisions.length === 0) {
                todoList.innerHTML = '<p style="color: var(--text-light);">No upcoming revisions in the next 7 days.</p>';
                return;
            }
            
            let html = '<ul class="todo-list">';
            upcomingRevisions.forEach(rev => {
                const dateString = rev.date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
                const isToday = rev.date.getTime() === today.getTime();
                const isFuture = rev.date.getTime() > today.getTime();
                
                html += `
                    <li class="todo-item ${isFuture ? 'future' : ''}">
                        <input type="checkbox" class="todo-checkbox" data-id="${rev.id}" data-index="${rev.revisionIndex}" ${rev.completed ? 'checked' : ''} ${isFuture ? 'disabled' : ''}>
                        <div class="todo-content">
                            <div class="todo-subject">${rev.subjectName}</div>
                            <div class="todo-topic">${rev.topicName}</div>
                            <div class="todo-revision">Revision ${rev.revisionIndex + 1}</div>
                        </div>
                        <div class="todo-date">${isToday ? 'Today' : dateString}</div>
                    </li>
                `;
            });
            html += '</ul>';
            
            todoList.innerHTML = html;
            
            // Add event listeners to checkboxes
            document.querySelectorAll('.todo-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const index = parseInt(this.getAttribute('data-index'));
                    
                    // Find the topic and update completion status
                    const topic = topics.find(t => t.id === id);
                    if (topic) {
                        topic.completedRevisions[index] = this.checked;
                        topic.lastCompletionDate = new Date();
                        localStorage.setItem('topics', JSON.stringify(topics));
                        
                        // Show congratulations animation
                        if (this.checked) {
                            showCongratulations(topic, index);
                        }
                        
                        // Update charts
                        initProgressChart();
                        initTimelineChart();
                        checkTodaysRevisions();
                        renderTodoList();
                        renderBacklog();
                    }
                });
            });
        }
        
        // Render backlog
        function renderBacklog() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const backlogRevisions = [];
            
            topics.forEach(topic => {
                topic.revisionDates.forEach((revDate, index) => {
                    const revisionDate = new Date(revDate);
                    revisionDate.setHours(0, 0, 0, 0);
                    
                    if (revisionDate < today && !topic.completedRevisions[index]) {
                        backlogRevisions.push({
                            id: topic.id,
                            subject: topic.subject,
                            subjectName: topic.subjectName,
                            topicName: topic.topicName,
                            revisionIndex: index,
                            date: revisionDate,
                            completed: topic.completedRevisions[index]
                        });
                    }
                });
            });
            
            // Sort by date (oldest first)
            backlogRevisions.sort((a, b) => a.date - b.date);
            
            if (backlogRevisions.length === 0) {
                backlogList.innerHTML = '<p style="color: var(--text-light);">No missed revisions. Great job!</p>';
                return;
            }
            
            let html = '<ul class="todo-list">';
            backlogRevisions.forEach(rev => {
                const dateString = rev.date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' });
                
                html += `
                    <li class="todo-item past-due">
                        <input type="checkbox" class="todo-checkbox" data-id="${rev.id}" data-index="${rev.revisionIndex}" ${rev.completed ? 'checked' : ''}>
                        <div class="todo-content">
                            <div class="todo-subject">${rev.subjectName}</div>
                            <div class="todo-topic">${rev.topicName}</div>
                            <div class="todo-revision">Revision ${rev.revisionIndex + 1}</div>
                        </div>
                        <div class="todo-date">${dateString}</div>
                    </li>
                `;
            });
            html += '</ul>';
            
            backlogList.innerHTML = html;
            
            // Add event listeners to checkboxes
            document.querySelectorAll('#backlogList .todo-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const index = parseInt(this.getAttribute('data-index'));
                    
                    // Find the topic and update completion status
                    const topic = topics.find(t => t.id === id);
                    if (topic) {
                        topic.completedRevisions[index] = this.checked;
                        topic.lastCompletionDate = new Date();
                        localStorage.setItem('topics', JSON.stringify(topics));
                        
                        // Show congratulations animation
                        if (this.checked) {
                            showCongratulations(topic, index);
                        }
                        
                        // Update charts
                        initProgressChart();
                        initTimelineChart();
                        checkTodaysRevisions();
                        renderTodoList();
                        renderBacklog();
                    }
                });
            });
        }
        
        // Render progress history
        function renderProgressHistory() {
            const today = new Date();
            const lastMonth = new Date(today);
            lastMonth.setDate(today.getDate() - 30);
            
            let html = '<ul style="list-style: none; padding: 0;">';
            
            // Get all revisions in the last 30 days
            const recentRevisions = [];
            
            topics.forEach(topic => {
                topic.revisionDates.forEach((revDate, index) => {
                    const revisionDate = new Date(revDate);
                    if (revisionDate >= lastMonth && revisionDate <= today) {
                        recentRevisions.push({
                            topic: topic,
                            revisionIndex: index,
                            date: revisionDate,
                            completed: topic.completedRevisions[index]
                        });
                    }
                });
            });
            
            // Sort by date (newest first)
            recentRevisions.sort((a, b) => b.date - a.date);
            
            if (recentRevisions.length === 0) {
                html += '<li style="padding: 10px; color: var(--text-light);">No revision activity in the last 30 days.</li>';
            } else {
                recentRevisions.forEach(rev => {
                    const dateString = rev.date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
                    const status = rev.completed ? 
                        `<span style="color: var(--success);"> Completed</span>` : 
                        `<span style="color: var(--warning);"> Pending</span>`;
                    
                    html += `
                        <li style="padding: 10px; border-bottom: 1px solid var(--border);">
                            <div><strong>${rev.topic.subjectName}: ${rev.topic.topicName}</strong></div>
                            <div>Revision ${rev.revisionIndex + 1} - ${dateString} - ${status}</div>
                        </li>
                    `;
                });
            }
            
            html += '</ul>';
            progressHistory.innerHTML = html;
        }

        // Check if we should show notification
        function checkForNotification() {
            // Check if notification was already shown today
            const today = new Date().toDateString();
            if (localStorage.getItem('notificationShownDate') === today) {
                return;
            }
           
            // Check if there are revisions for today
            const todaysRevisions = getRevisionsForDate(new Date());
            if (todaysRevisions.length > 0) {
                // Show notification
                showNotification(todaysRevisions);
               
                // Mark notification as shown for today
                localStorage.setItem('notificationShownDate', today);
            }
        }
       
        // Show notification
        function showNotification(revisions) {
            let message = 'You have revisions scheduled for today:\n\n';
           
            revisions.forEach((rev, index) => {
                const subjectName = rev.subject === 'custom' ? 'Custom Subject' : subjects[rev.subject].name;
                message += `${index + 1}. ${subjectName}: ${rev.topicName}\n`;
            });
           
            notificationMessage.textContent = message;
            notificationModal.classList.add('active');
        }
       
        // Close notification
        function closeNotification() {
            notificationModal.classList.remove('active');
        }
       
        // Go to revisions from notification
        function goToRevisions() {
            notificationModal.classList.remove('active');
            // Scroll to today's revisions section
            document.querySelector('.dashboard').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Flip flashcard
        function flipFlashcard() {
            flashcard.classList.toggle('flipped');
        }
        
        // Show previous flashcard
        function showPrevFlashcard() {
            if (currentFlashcardIndex > 0) {
                currentFlashcardIndex--;
                updateFlashcard();
            }
        }
        
        // Show next flashcard
        function showNextFlashcard() {
            if (currentFlashcardIndex < flashcards.length - 1) {
                currentFlashcardIndex++;
                updateFlashcard();
            }
        }
        
        // Update flashcard content
        function updateFlashcard() {
            const card = flashcards[currentFlashcardIndex];
            flashcardTitle.textContent = card.title;
            flashcardContent.textContent = card.content;
            flashcardCounter.textContent = `${currentFlashcardIndex + 1}/${flashcards.length}`;
            
            // Reset card to front
            flashcard.classList.remove('flipped');
            
            // Update button states
            prevFlashcard.disabled = currentFlashcardIndex === 0;
            nextFlashcard.disabled = currentFlashcardIndex === flashcards.length - 1;
        }
        
        // Show congratulations animation
        function showCongratulations(topic, revisionIndex) {
            congratulationsMessage.textContent = `Great job completing revision ${revisionIndex + 1} of "${topic.topicName}"! Keep up the good work.`;
            congratulations.classList.add('active');
        }
        
        // Close congratulations animation
        function closeCongratulationsFunc() {
            congratulations.classList.remove('active');
        }

        // Schedule daily notification at 5 AM
        function scheduleDailyNotification() {
            // Calculate time until next 5 AM
            const now = new Date();
            const target = new Date();
            target.setHours(5, 0, 0, 0);
            
            // If it's already past 5 AM today, schedule for tomorrow
            if (now > target) {
                target.setDate(target.getDate() + 1);
            }
            
            const timeUntilNotification = target.getTime() - now.getTime();
            
            // Schedule the notification
            setTimeout(() => {
                // Check if there are revisions for today
                const todaysRevisions = getRevisionsForDate(new Date());
                if (todaysRevisions.length > 0) {
                    // Show notification
                    showNotification(todaysRevisions);
                }
                
                // Schedule next notification for tomorrow
                scheduleDailyNotification();
            }, timeUntilNotification);
        }

        // Check for auto-removal of completed revisions
        function checkAutoRemoval() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // Check if we've already done auto-removal today
            const lastAutoRemoval = localStorage.getItem('lastAutoRemoval');
            if (lastAutoRemoval === today.toDateString()) {
                return;
            }
            
            // Reset completed revisions for past days (not today)
            topics.forEach(topic => {
                topic.revisionDates.forEach((revDate, index) => {
                    const revisionDate = new Date(revDate);
                    revisionDate.setHours(0, 0, 0, 0);
                    
                    // If this revision was for a past day and was completed, keep it completed
                    // Only remove from display, not from completion status
                    if (revisionDate.getTime() < today.getTime() && topic.completedRevisions[index]) {
                        // We don't reset the completion status, we just don't show it in the to-do list
                        // This is handled in renderTodoList function
                    }
                });
            });
            
            // Save updated topics
            localStorage.setItem('topics', JSON.stringify(topics));
            
            // Update last auto-removal date
            localStorage.setItem('lastAutoRemoval', today.toDateString());
            
            // Update UI
            renderTodoList();
            renderBacklog();
            initProgressChart();
            initTimelineChart();
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
